<!DOCTYPE html>

<!--
   RestrictedTextField
   https://www.github.com/kloverde/jquery-RestrictedTextField

   Copyright (c) 2016 Kurtis LoVerde
   All rights reserved

   Donations:  https://paypal.me/KurtisLoVerde/10
-->

<html>
   <head>
      <meta charset="utf-8"/>

      <title>RestrictedTextField - Selenium Tests</title>

      <style type="text/css">
         html, body {
            height: 100%;
            margin: 0px !important;
            padding: 0px !important
         }

         h1, h2 {
            white-space: nowrap;
            margin-top: 0;
            margin-bottom: 0;
            padding-top: 20px;
         }

         .center {
             margin-left: auto;
             margin-right: auto;
             width: 60%;
         }

         #everythingContainer {
            text-align: center;
            height: 100%;
         }

         #fieldContainer {
            padding-bottom: 15px;
         }

         #field {
            margin-top: 15px;
         }

         #log {
            margin-top: 35px !important;
            width: 100%;
            height: 65%;
            margin: 0px;
            padding: 0px;
            text-align: left;
            overflow: scroll;
         }

         #exitModal {
            position: absolute;
            display: none;
            text-align: center;
            padding: 40px 15px 40px 15px;
            background-color: #D9F5FF;
            border: 1px solid #000;
         }

         #exitModal h1, #exitModal h2 {
            padding: 0;
         }

         #exitModal h2 {
            padding-top: 20px !important;
         }
      </style>

      <script type="text/javascript" src="../test/jquery.js"></script>
      <script type="text/javascript" src="../src/jquery.restrictedtextfield.js"></script>

      <script type="text/javascript">
         var inputIgnoredEvent,
             validationFailedEvent,
             validationSuccessEvent;

         $( document ).ready( function() {
            $( window ).on( "resize", function() {
               centerExitModal();
            } );
         } );

         function setUp() {
            log( "setUp" );

            $( "#fieldContainer" ).html( "<input type='text' id='field'/>" );

            inputIgnoredEvent = false;
            validationFailedEvent = false;
            validationSuccessEvent = false;
         }

         function tearDown() {
            log( "tearDown\n" );
         }

         function resetEventFlags() {
            log( "resetting event flags for blur validation" );

            inputIgnoredEvent = false;
            validationFailedEvent = false;
            validationSuccessEvent = false;
         }

         function initField( testName, fieldType, ignore ) {
            log( "test:  " + testName );
            log( "initField:  fieldType[" + fieldType + "], ignore[" + ignore + "]" );

            var jqField = $( "#field" );

            jqField.restrictedTextField( { type : fieldType,
                                           preventInvalidInput : ignore,
                                           logger : log } );

            jqField.on( "inputIgnored", function() {
               log( "inputIgnored event" );
               inputIgnoredEvent = true;
            } );

            jqField.on( "validationFailed", function() {
               log( "validationFailed event" );
               validationFailedEvent = true;
            } );

            jqField.on( "validationSuccess", function() {
               log( "validationSuccess event" );
               validationSuccessEvent = true;
            } );
         }

         function didInputIgnoredEventFire() {
            log( "returning inputIgnoredEvent = " + inputIgnoredEvent );
            return inputIgnoredEvent;
         }

         function didValidationFailedEventFire() {
            log( "returning validationFailedEvent = " + validationFailedEvent );
            return validationFailedEvent;
         }

         function didValidationSuccessEventFire() {
            log( "returning validationSuccessEvent = " + validationSuccessEvent );
            return validationSuccessEvent;
         }

         function log( msg ) {
            var log = $( "#log" );

            if( console && console.log ) {
               console.log( msg );
            }

            log.append( msg + "\n" );

            log.prop( "scrollTop", log.prop("scrollHeight") );
         }

         function showExitModal() {
            centerExitModal();
            $( "#exitModal" ).show();
         }

         function centerExitModal() {
           var modal = $( "#exitModal" );

           var modalHeight = modal.height(),
               modalWidth  = modal.width();

           var centerX  = $( window ).width() / 2,
               centerY  = $( window ).height() / 2;

           modal.css( "top", (centerY - (modalHeight / 2)) + "px" );
           modal.css( "left", (centerX - (modalWidth / 2)) + "px" );
         }
      </script>
   </head>
   <body>
      <div id="everythingContainer" class="center">
         <h1><a href="https://www.github.com/kloverde/jquery-RestrictedTextField" target="new">RestrictedTextField</a></h1><br/>
         <h1>AUTOMATED TESTING IN PROGRESS</h1>
         <h2>Do not disturb this machine</h2>

         <div id="fieldContainer" class="center"></div>
         <pre id="log"></pre>
      </div>

      <div id="exitModal">
         <h1>Test complete.  Saving browser log...</h1>
         <h2>The browser window will close automatically when done.</h2>
      </div>
   </body>
</html>
