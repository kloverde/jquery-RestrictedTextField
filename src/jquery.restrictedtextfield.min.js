/*
 * RestrictedTextField v1.1
 * https://www.github.com/kloverde/jquery-RestrictedTextField
 *
 * Copyright (c) 2016, Kurtis LoVerde
 * All rights reserved.
 *
 * Donations:  https://paypal.me/KurtisLoVerde/10
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 *     1. Redistributions of source code must retain the above copyright
 *        notice, this list of conditions and the following disclaimer.
 *     2. Redistributions in binary form must reproduce the above copyright
 *        notice, this list of conditions and the following disclaimer in the
 *        documentation and/or other materials provided with the distribution.
 *     3. Neither the name of the copyright holder nor the names of its
 *        contributors may be used to endorse or promote products derived from
 *        this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
 * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
 * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
!function(a){"use strict";function b(a,b,c,e){if(void 0==b||null==b)throw"id is undefined";if(!d(b,"String"))throw"id must be a string";if(b.length<1)throw"id is empty";if(void 0==c||null==c)throw"fullRegex is undefined";if(!d(c,"RegExp"))throw"fullRegex must be a RegExp object";if(void 0!=e&&null!=e&&!d(e,"RegExp"))throw"partialRegex must be a RegExp object";a[b]={fullRegex:c,partialRegex:e}}function c(a){return void 0===a||null===a||a.length<1}function d(a,b){var c=Object.prototype.toString.call(a).slice(8,-1);return void 0!==a&&null!==a&&c.toUpperCase()===b.toUpperCase()}a.fn.RestrictedTextFieldConfig=function(){var c=a.fn.RestrictedTextFieldConfig.customTypes=a.fn.RestrictedTextFieldConfig.customTypes||[];this.addType=function(a,d,e){b(c,a,d,e)}},a.fn.restrictedTextField=function(d){function i(){var c=/^-\d*$/,d=/^-?\d*\.?\d*$/,e=/^\d*\.?\d*$/,f=/^0*\.?$|^-\d*\.?\d*$/,g=/^-?\d*\.?\d{0,2}$/,h=/^\d*\.?\d{0,2}$/,i=/^0*\.?0?$|^-\d*\.?\d{0,2}$/;void 0!==a.fn.restrictedTextField.types&&null!==a.fn.restrictedTextField.types||(a.fn.restrictedTextField.types=[]);var j=a.fn.restrictedTextField.types=a.fn.restrictedTextField.types||[];b(j,"alpha",/^[a-zA-Z]+$/,null),b(j,"upperAlpha",/^[A-Z]+$/,null),b(j,"lowerAlpha",/^[a-z]+$/,null),b(j,"alphaSpace",/^[a-zA-Z\ ]+$/,null),b(j,"upperAlphaSpace",/^[A-Z\ ]+$/,null),b(j,"lowerAlphaSpace",/^[a-z\ ]+$/,null),b(j,"alphanumeric",/^[a-zA-Z\d]+$/,null),b(j,"upperAlphanumeric",/^[A-Z\d]+$/,null),b(j,"lowerAlphanumeric",/^[a-z\d]+$/,null),b(j,"alphanumericSpace",/^[a-zA-Z\d\ ]+$/,null),b(j,"upperAlphanumericSpace",/^[A-Z\d\ ]+$/,null),b(j,"lowerAlphanumericSpace",/^[a-z\d\ ]+$/,null),b(j,"int",/^-?\d+$/,c),b(j,"positiveInt",/^\d+$/,null),b(j,"negativeInt",/^0+$|^-\d+$/,c),b(j,"strictInt",/^0+$|^-?0*[1-9]\d*$/,c),b(j,"strictPositiveInt",/^\d+$/,null),b(j,"strictNegativeInt",/^0+$|^-0*[1-9]\d*$/,c),b(j,"float",/^-?\d*\.?\d+$/,d),b(j,"positiveFloat",/^\d*\.?\d+$/,e),b(j,"negativeFloat",/^-?0+$|^-?0*\.?0+$|^-\d*\.?\d+$/,f),b(j,"strictFloat",/^0*\.0+$|^-?0*\.\d*[1-9]$|^-?\d*\.\d*[1-9]\d*$|^-?0*[1-9]\d*?\d*\.\d+$/,d),b(j,"strictPositiveFloat",/^0*\.0+$|^0*\.\d*[1-9]$|^\d*\.\d*[1-9]\d*$|^\d*[1-9]*\d*\.\d+$/,e),b(j,"strictNegativeFloat",/^0*\.0+$|^-0*\.\d*[1-9]$|^-\d*\.\d*[1-9]\d*$|^-[^0]\d*?\d*\.\d+$/,f),b(j,"money",/^-?\d+\.\d{2}$/,g),b(j,"positiveMoney",/^\d+\.\d{2}$/,h),b(j,"negativeMoney",/^0\.00$|^-\d+\.\d{2}$/,i),b(j,"accountingMoney",/^\d*\.?\d{2}$|^\(\d*\.?\d{2}\)$/,/^\(?0*\.?0{0,2}$|^[\.\d]$|^\.$|^\d*\.\d{0,2}$|^\(\d*\.?$|^\(\d*\.\d{1,2}?\)?$/),b(j,"negativeAccountingMoney",/^0\.00$|^\(\d*\.?\d{2}\)$/,/^\(?0*\.?0{0,2}$|^\(\d*\.?$|^\((\d*\.\d{1,2}?)\)?$/)}function k(a){e.logger&&"function"==typeof e.logger&&e.logger("jquery.restrictedtextfield.js:  "+a)}var e=a.extend({type:null,preventInvalidInput:!0,logger:void 0},d),f="inputIgnored",g="validationFailed",h="validationSuccess";if("input"!==this.prop("tagName").toLowerCase())throw"RestrictedTextField can only be invoked on an input element";void 0!==a.fn.restrictedTextField.types&&null!==a.fn.restrictedTextField.types||i();var j=a.fn.restrictedTextField.types[e.type];if(c(j)&&(void 0!==a.fn.RestrictedTextFieldConfig.customTypes&&null!==a.fn.RestrictedTextFieldConfig.customTypes&&(j=a.fn.RestrictedTextFieldConfig.customTypes[e.type]),c(j)))throw"Invalid type: "+e.type;return this.each(function(){function i(a){function k(a){return a.replace(/^(-?\(?)0*(\d+\.\d+)/,"$1$2")}if(c(a))return a;var b=a;a=k(a);var d=a.length,e="-"===a[0]?"-":"",f="("===a[0]?"(":"",g=")"===a[d-1]?")":"",h=a.indexOf("."),i=a.substring(""===f&&""===e?0:1,h>0?h-1:")"===g?d-1:d),j="00";return h>-1&&(i=a.substring(""===f&&""===e?0:1,h),j=a.substring(h+1,""===g?d:d-1)),b=""!==i&&0!==parseInt(i)||0!==parseInt(j)?f+e+(""===i?"0":i)+"."+j+(1===j.length?"0":"")+g:"0.00"}var b=a(this),d="";b.on("keydown paste",function(a){d=this.value}),b.on("input",function(b){k("caught input - new value: "+this.value);var c=a(this),i=!1,l=!1,m=g;0===this.value.length?(i=!0,l=!0,m=h):(l=j.fullRegex.test(this.value),void 0!==j.partialRegex&&null!==j.partialRegex&&(i=j.partialRegex.test(this.value)),l?(k("passes full regex"),m=h):(k("fails full regex"),i?(k("passes partial regex"),m=h):(k("fails partial regex"),m=g)),i||l||e.preventInvalidInput&&(m=f,c.val(d),k('reverted field to "'+d+'"'))),k("triggering "+m+" event "),c.trigger(m)}),b.on("blur",function(){var a=e.type,c=!1,d=g;if(("money"!==a&&"positiveMoney"!==a&&"negativeMoney"!==a||isNaN(this.value))&&("accountingMoney"!==a&&"negativeAccountingMoney"!==a||isNaN(this.value.replace(/^\((.*)\)$/,"$1"))))c=j.fullRegex.test(this.value);else{var f=i(this.value);c=j.fullRegex.test(f),c&&(this.value=f,k("blur:  formatted "+e.type+" field to "+f))}(0===this.value.length||c)&&(d=h),k("triggering "+d+" event "),b.trigger(d)})})}}(jQuery);